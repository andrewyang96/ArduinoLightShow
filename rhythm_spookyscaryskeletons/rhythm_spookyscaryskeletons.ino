unsigned long time;
unsigned long startTime;

// CHANGE THESE VARIABLES
int DIFFLENGTH = 4584;
int TRIGGERSLENGTH = 492;

// insert array of triggers
short triggers [492] = {140, 149, 150, 159, 168, 169, 178, 187, 188, 196, 197, 206, 215, 224, 225, 234, 243, 244, 253, 262, 271, 272, 281, 290, 299, 300, 309, 318, 319, 326, 328, 337, 338, 346, 347, 356, 365, 374, 375, 384, 393, 394, 403, 412, 421, 422, 431, 440, 448, 449, 450, 459, 468, 469, 478, 487, 496, 497, 505, 506, 515, 523, 525, 534, 543, 544, 553, 562, 571, 572, 581, 590, 599, 600, 609, 618, 619, 628, 637, 646, 647, 655, 656, 665, 674, 675, 684, 693, 694, 703, 712, 721, 731, 735, 740, 749, 890, 899, 900, 909, 918, 919, 928, 937, 947, 956, 965, 966, 974, 975, 984, 994, 1003, 1012, 1022, 1031, 1050, 1059, 1069, 1078, 1087, 1097, 1106, 1116, 1124, 1125, 1134, 1144, 1153, 1162, 1171, 1181, 1199, 1200, 1209, 1219, 1228, 1237, 1247, 1256, 1266, 1274, 1275, 1284, 1294, 1303, 1309, 1312, 1322, 1331, 1350, 1359, 1369, 1378, 1387, 1397, 1406, 1416, 1425, 1434, 1443, 1444, 1453, 1462, 1471, 1481, 1490, 1499, 1500, 1634, 1637, 1640, 1649, 1650, 1659, 1669, 1678, 1687, 1697, 1706, 1715, 1716, 1724, 1725, 1734, 1744, 1753, 1762, 1772, 1781, 1799, 1800, 1809, 1818, 1819, 1828, 1837, 1847, 1853, 1856, 1865, 1866, 1874, 1875, 1884, 1893, 1894, 1903, 1921, 1931, 1949, 1950, 1959, 1969, 1978, 1987, 1997, 2003, 2006, 2015, 2016, 2024, 2025, 2034, 2043, 2044, 2053, 2059, 2062, 2072, 2081, 2100, 2109, 2115, 2119, 2128, 2137, 2147, 2153, 2156, 2165, 2166, 2174, 2175, 2184, 2193, 2194, 2203, 2212, 2221, 2231, 2390, 2399, 2400, 2409, 2419, 2428, 2437, 2446, 2447, 2454, 2456, 2465, 2473, 2475, 2484, 2493, 2494, 2503, 2512, 2521, 2522, 2531, 2540, 2549, 2550, 2559, 2568, 2569, 2578, 2587, 2596, 2597, 2606, 2615, 2624, 2625, 2634, 2643, 2644, 2653, 2661, 2662, 2671, 2672, 2681, 2690, 2699, 2700, 2709, 2718, 2719, 2728, 2737, 2747, 2755, 2756, 2765, 2774, 2775, 2784, 2793, 2794, 2803, 2812, 2821, 2822, 2831, 2840, 2849, 2990, 2999, 3000, 3009, 3018, 3019, 3028, 3035, 3037, 3047, 3056, 3065, 3066, 3075, 3084, 3093, 3094, 3103, 3110, 3112, 3117, 3122, 3131, 3150, 3159, 3168, 3169, 3178, 3185, 3187, 3197, 3206, 3213, 3215, 3216, 3225, 3234, 3243, 3244, 3253, 3260, 3262, 3290, 3300, 3309, 3318, 3319, 3328, 3335, 3337, 3347, 3356, 3365, 3375, 3384, 3393, 3394, 3403, 3412, 3422, 3431, 3450, 3459, 3468, 3469, 3478, 3485, 3487, 3496, 3497, 3506, 3513, 3515, 3516, 3525, 3534, 3543, 3544, 3553, 3560, 3562, 3590, 3734, 3737, 3740, 3749, 3750, 3759, 3768, 3769, 3778, 3787, 3788, 3797, 3806, 3815, 3816, 3824, 3825, 3834, 3843, 3844, 3853, 3859, 3862, 3872, 3881, 3899, 3900, 3909, 3918, 3919, 3928, 3937, 3946, 3947, 3956, 3965, 3966, 3975, 3984, 3993, 3994, 4003, 4012, 4021, 4031, 4049, 4050, 4059, 4068, 4069, 4078, 4087, 4095, 4097, 4106, 4112, 4115, 4116, 4124, 4125, 4134, 4143, 4144, 4153, 4162, 4172, 4181, 4200, 4209, 4218, 4219, 4228, 4237, 4238, 4246, 4247, 4256, 4265, 4266, 4275, 4284, 4293, 4294, 4303, 4312, 4321, 4331, 4340, 4490, 4492};

int prevIndex = 0;
int index = -1;

int ledPins [7] = {12,11,10,9,8,7,6};
int multiColor [3] = {5,4,3}; // handle 8th multicolor LED
int state = 0;
int multiColorState = 0;
boolean multiColorStateArr [7][3] = {{true,false,false},
                                  {false,true,false},
                                  {false,false,true},
                                  {true,true,false},
                                  {false,true,true},
                                  {true,false,true},
                                  {true,true,true}};
/* Multicolor states:
   0: Red
   1: Green
   2: Blue
   3: Red + Green = Lime
   4: Green + Blue = Skyblue
   5: Red + Blue = Purple
   6: RGB = White
*/

void setup() {
  for (int i = 0; i < 7; i++) {
    pinMode(ledPins[i], OUTPUT); 
  }
  for (int i = 0; i < 3; i++) {
    pinMode(multiColor[i], OUTPUT);
  }
  Serial.begin(9600);
  randomSeed(analogRead(0));
}

void loop() {
  
  if (index == -1) {
    for (int i = 5; i > 0; i--) {
      Serial.println(i);
      delay(500);
    }
    index = 0;
    startTime = millis();
  }
  
  time = millis();
  prevIndex = index;
  index = ((time-startTime) / 50) % DIFFLENGTH;
  if (prevIndex != index) {
    Serial.print("Index: ");
    Serial.println(index);
  }
  
  for (int i = 0; i < TRIGGERSLENGTH; i++) {
    
    if (prevIndex != index && index == triggers[i]) {
      
      for (int i = 0; i < 7; i++) {
        if (random(2) == 0) {
          digitalWrite(ledPins[i], LOW);
        } else {
          digitalWrite(ledPins[i], HIGH);
        }
      }
      
      if (random(2) == 0) {
        for (int i = 0; i < 3; i++) {
          digitalWrite(multiColor[i], LOW);
        }
      } else {
        for (int i = 0; i < 3; i++) {
          if (random(2) == 0) {
            digitalWrite(multiColor[i], HIGH);
          }
        }
      }
      
      break;
      
    }
    
  }
  
}
